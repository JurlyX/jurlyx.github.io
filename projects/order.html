<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MaddoxJ Kitchen</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Roboto', sans-serif; }
body { background: #fff5f0; color: #333; padding: 20px; }
header { text-align: center; margin-bottom: 30px; }
header h1 { font-size: 3em; color: #ff5722; }
header p { font-size: 1.2em; color: #555; }

.menu { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
.item { background: #fff; border-radius: 15px; padding: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); text-align: center; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; }
.item:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
.item img { width: 100%; border-radius: 10px; margin-bottom: 10px; }
.item h3 { margin-bottom: 5px; font-size: 1.2em; color: #ff5722; }
.item p, .item small { font-size: 1em; color: #555; }

.cart { position: fixed; bottom: 20px; right: 20px; background: #ff5722; color: #fff; border-radius: 50px; padding: 15px 25px; cursor: pointer; box-shadow: 0 5px 20px rgba(0,0,0,0.3); font-weight: bold; transition: transform 0.2s; }
.cart:hover { transform: scale(1.05); }

#cartModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; }
#cartModalContent { background: #fff; border-radius: 15px; padding: 30px; width: 90%; max-width: 500px; max-height: 80%; overflow-y: auto; position: relative; }
#cartModalContent h2 { margin-bottom: 20px; color: #ff5722; }
#cartModalContent ul { list-style: none; padding: 0; }
#cartModalContent li { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #eee; }
#cartModalContent button { background: #ff5722; color: #fff; border: none; border-radius: 10px; padding: 5px 10px; cursor: pointer; transition: background 0.2s; }
#cartModalContent button:hover { background: #e64a19; }
#closeCart { position: absolute; top: 15px; right: 15px; background: #ff5722; color: #fff; border: none; border-radius: 50%; width: 30px; height: 30px; font-weight: bold; cursor: pointer; }
#closeCart:hover { background: #e64a19; }
.subtotal { margin-top: 15px; font-weight: bold; color: #333; }
#submitOrderBtn { width: 100%; margin-top: 10px; padding: 10px; font-size: 1.1em; }
</style>
</head>
<body>

<header>
  <h1>MaddoxJ Kitchen</h1>
  <p>Click on items to add to your order</p>
</header>

<div class="menu" id="menu"></div>

<div class="cart" id="cartBtn">View Cart (0)</div>

<div id="cartModal">
  <div id="cartModalContent">
    <button id="closeCart">×</button>
    <h2>Your Cart</h2>
    <ul id="cartList"></ul>
    <div class="subtotal" id="subtotal"></div>
    <button id="submitOrderBtn">Submit Order</button>
    <p id="status" style="margin-top:10px;"></p>
  </div>
</div>

<script>
const BIN_ID = "68e6739e43b1c97be95ee60e";
const API_KEY = "$2a$10$w7kHZII5PZ.x1MhtZTBQm.WFZP1ZkfvsbDscb/WNBo9.0kmDtxgH.";

const menuItems = [
  {id: 1, name: "Ultimate BaconBurger™", category: "Bacon, Lettuce, Tomatoes, Buns, cheese, and a juicy beef patty.", price: 8.99, img: "https://mccormick.widen.net/content/5sdclvkkcy/original/triple_mustard_bacon_cheese_burger800x800.jpg"},
  {id: 2, name: "Hotdog", category: "Beef, Bun, topping of choice", price: 5.00, img: "https://potatorolls.com/wp-content/uploads/2020/10/Basic-Hot-Dogs-960x640.jpg"}
  {id: 3, name: "Pepperoni Pizza", category: "Bread, Tomato Sauce, Mozzarella cheese, and pepperoni.", price: 12.50, img: "https://www.allrecipes.com/thmb/iXKYAl17eIEnvhLtb4WxM7wKqTc=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/240376-homemade-pepperoni-pizza-Beauty-3x4-1-6ae54059c23348b3b9a703b6a3067a44.jpg"},
  {id: 4, name: "Caesar Salad", category: "Romaine lettuce, Caesar sauce, and Bacon bits", price: 7.25, img: "https://weekendatthecottage.com/wp-content/uploads/2021/01/HomemadeCaesarSalad8-1024x683.jpg"},
  {id: 5, name: "French Fries", category: "Fried potatoes, salt", price: 3.50, img: "https://thesaltedpotato.com/wp-content/uploads/2022/04/twice-fried-fries.webp"},
  {id: 6, name: "Soda", category: "Drinks", price: 1.99, img: "https://unimarket.ca/cdn/shop/files/MexicanCocaCola-500ml-6pack.jpg?v=1720123081&width=1080"},
  {id: 7, name: "Milkshake", category: "Chocolate, vanilla, or strawberry icecream, milk, and toppings of your choice.", price: 4.99, img: "https://images.contentstack.io/v3/assets/bltcedd8dbd5891265b/bltd2f0b951708bdfce/66707638b76a9292bd908d6f/chocolate-truffle-featured-image.jpg?q=70&width=3840&auto=webp"},
];

let cart = [];

function renderMenu() {
  const menuDiv = document.getElementById('menu');
  menuDiv.innerHTML = "";
  menuItems.forEach(item => {
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <img src="${item.img}" alt="${item.name}">
      <h3>${item.name}</h3>
      <p>$${item.price.toFixed(2)}</p>
      <small>${item.category}</small>
    `;
    div.onclick = () => addToCart(item);
    menuDiv.appendChild(div);
  });
}

function addToCart(item) {
  cart.push(item);
  updateCartCount();
}

function updateCartCount() {
  document.getElementById('cartBtn').textContent = `View Cart (${cart.length})`;
}

function renderCart() {
  const cartList = document.getElementById('cartList');
  cartList.innerHTML = '';
  let subtotal = 0;
  cart.forEach((item, idx) => {
    subtotal += item.price;
    const li = document.createElement('li');
    li.textContent = `${item.name} - $${item.price.toFixed(2)}`;
    const removeBtn = document.createElement('button');
    removeBtn.textContent = "Remove";
    removeBtn.onclick = () => { cart.splice(idx,1); renderCart(); updateCartCount(); };
    li.appendChild(removeBtn);
    cartList.appendChild(li);
  });
  document.getElementById('subtotal').textContent = `Subtotal: $${subtotal.toFixed(2)}`;
}

document.getElementById('cartBtn').onclick = () => {
  document.getElementById('cartModal').style.display = 'flex';
  renderCart();
};

document.getElementById('closeCart').onclick = () => {
  document.getElementById('cartModal').style.display = 'none';
};

document.getElementById('submitOrderBtn').onclick = async () => {
  const name = prompt("Enter your name:");
  if(!name) return alert("Name is required!");
  if(cart.length === 0) return alert("Cart is empty!");

  try {
    // Fetch current orders
    const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
      headers: { "X-Master-Key": API_KEY }
    });
    const data = await res.json();
    const orders = Array.isArray(data.record) ? data.record : [];

    // Add new order
    const newOrder = {
      id: Date.now(),
      name,
      order: cart.map(i => i.name),
      complete: false
    };
    orders.push(newOrder);

    // PUT to bin
    await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
      method: 'PUT',
      headers: {
        "Content-Type": "application/json",
        "X-Master-Key": API_KEY
      },
      body: JSON.stringify(orders)
    });

    cart = [];
    updateCartCount();
    renderCart();
    document.getElementById('status').textContent = "✅ Order submitted successfully!";
  } catch (err) {
    console.error(err);
    alert("Error submitting order.");
  }
};

renderMenu();
</script>

</body>
</html>
